#!/bin/sh
# Maven Wrapper script

set -e

MAVEN_WRAPPER_JAR=".mvn/wrapper/maven-wrapper.jar"
MAVEN_WRAPPER_PROPERTIES=".mvn/wrapper/maven-wrapper.properties"

# Determine the project base directory
BASEDIR=$(dirname "$0")
cd "$BASEDIR"

if [ -r "$MAVEN_WRAPPER_PROPERTIES" ]; then
    MAVEN_URL=$(grep 'distributionUrl' "$MAVEN_WRAPPER_PROPERTIES" | cut -d'=' -f2)
fi

if [ -z "$MAVEN_URL" ]; then
    MAVEN_URL="https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.9.6/apache-maven-3.9.6-bin.zip"
fi

# Use Maven from PATH if available, otherwise download
if command -v mvn >/dev/null 2>&1; then
    exec mvn "$@"
else
    echo "Maven not found in PATH. Please install Maven or ensure it's in your PATH."
    exit 1
fi
